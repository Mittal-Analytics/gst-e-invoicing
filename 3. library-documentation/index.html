<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!--
    The page_title contains the title for a page as shown in the navigation.
    Site name contains the name as defined in the mkdocs.yml
  -->
  <title>Documentation of the Library - GST E-Invoicing Python Library</title>

  <link rel="shortcut icon" href="../img/favicon.png">
  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/theme.css">
  <link rel="stylesheet" href="../fontello/css/fontello.css">

  <!-- highlight.js -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  

  
  

  <!--
    http://www.mkdocs.org/user-guide/configuration/#google_analytics
  -->
  
</head>

<body>
  <main>
    <div class="content">
      <nav class="mute">
        <a href="https://mittal-analytics.github.io/gst-e-invoicing/" class="strong ink">Manuals</a> &#8594;
        
        
	

	

	

	
		
			<span>Documentation of the Library</span>
		

		
	

	

      </nav>

      

      
      <article data-current-article="/gst-e-invoicing/3.%20library-documentation/">
        <h1 id="documentation-of-the-library">Documentation of the Library</h1>
<h2 id="session">Session</h2>
<p>The usual workflow in GST portal is as follows:</p>
<ol>
<li>Generate session token</li>
<li>Use the token for accessing the APIs</li>
</ol>
<p>The library works in the same manner:</p>
<pre><code class="language-python">from gst_irn import Session

session = Session(
    # ... credentials
)

# generate token
session.generate_token()

# use the APIs
session.get_gst_info('GSTNUMBER')
</code></pre>
<p>The session object has following functions. All the functions handle the encryption and authentication automatically.</p>
<h3 id="sessiongenerate_tokenforce_regenerate_tokenfalse-cache_dirtokens_cache">session.generate_token(force_regenerate_token=False, cache_dir="tokens_cache")</h3>
<p>Generates token for the session. The auth session generated by the IRP (Invoice Registration Portal) is valid for 6 hours (1 hour in sandbox). The portal <a href="https://einv-apisandbox.nic.in/best-practices.html">recommends</a> re-using that auth token till expiry.</p>
<p>The library tries to cache the auth token and reuse it till expiry. The cache is saved in the <code>cache_dir</code>. The directory is created if it doesn't exist.</p>
<p>Passing <code>force_regenerate_token</code> as true force regenerates the token.</p>
<h3 id="sessiongeturl-headers_extranone">session.get(url, headers_extra=None)</h3>
<p>Sends a <code>GET</code> request to the given url. We can pass a dictionary of any extra headers if the API requires.</p>
<p>The function returns the decrypted JSON response.</p>
<h3 id="sessionposturl-data-headers_extranone">session.post(url, data, headers_extra=None)</h3>
<p>Sends a <code>POST</code> request to the given url. The data / payload is automatically encrypted using the public key. We can pass a dictionary of any extra headers if the API requires.</p>
<p>The function returns the decrypted JSON response.</p>
<h3 id="sessionget_gst_infoparty_gstin">session.get_gst_info(party_gstin)</h3>
<p>Returns the GST info for the given GST number (string). The structure of the JSON response is documented at <a href="https://einv-apisandbox.nic.in/version1.04/get-gstin-details.html#responsePayload">https://einv-apisandbox.nic.in/version1.04/get-gstin-details.html#responsePayload</a>.</p>
<h3 id="sessiongenerate_e_invoiceinvoice">session.generate_e_invoice(invoice)</h3>
<p>Generates the IRN for the given invoice. The <code>invoice</code> argument is a Python <code>dict</code>. It is automatically converted to JSON internally.</p>
<p>The schema for the <code>invoice</code> is available at <a href="https://einvoice1.gst.gov.in/Documents/EINVOICE_SCHEMA.xlsx">https://einvoice1.gst.gov.in/Documents/EINVOICE_SCHEMA.xlsx</a></p>
<p>The JSON response is documented at <a href="https://einv-apisandbox.nic.in/version1.03/generate-irn.html#responsePayload">https://einv-apisandbox.nic.in/version1.03/generate-irn.html#responsePayload</a>.</p>
<h3 id="other-api-endpoints">Other API endpoints</h3>
<p>The GST Portal has multiple <a href="https://einv-apisandbox.nic.in">other endpoints</a>. These are for generating e-waybills, cancelling IRNs or fetching info of any doc.</p>
<p>These endpoints can be accessed using the <code>session.get</code> and <code>session.post</code> methods above.</p>
      </article>

      
      <div class="margin-top-64">
        <button id="mark-read-toggle" onclick="toggleRead(this)">Mark as read</button>
      </div>
      
      
    </div>

    
      <div class="flex flex-space-between smaller strong">
        <div>
          
            <a href="../2.%20using-pass-through-apis/">&#8592; Using passthrough APIs provided by GSPs</a>
          
        </div>

        <div>
          
            <a href="../4.%20handling-errors/">Handling Errors &#8594;</a>
          
        </div>
      </div>
    
  </main>

  <div class="sidebar">
    
    <div role="search">
      <form action="../search.html" method="get">
        <input type="search" name="q">
        <button type="submit">Search</button>
      </form>
    </div>
    

    <hr>

    <nav class="mute">
      <ul style="margin-left: -16px;">
        
          <li class="strong ink">Manuals Available</li>
          
            <li>
              
              
	<a href=".." >
		Getting Started
	</a>

            </li>
          
            <li>
              
              
	<a href="../1.%20getting-credentials/" >
		Obtaining credentials for using the APIs
	</a>

            </li>
          
            <li>
              
              
	<a href="../2.%20using-pass-through-apis/" >
		Using passthrough APIs provided by GSPs
	</a>

            </li>
          
            <li>
              
              
	<a href="./" >
		Documentation of the Library
	</a>

            </li>
          
            <li>
              
              
	<a href="../4.%20handling-errors/" >
		Handling Errors
	</a>

            </li>
          
        
      </ul>
    </nav>
  </div>

  <script>var base_url = '..';</script>
  <script src="../js/theme.js"></script>
  
    <script src="../search/main.js"></script>
  

  <!--
  MkDocs version      : 1.3.1
  Docs Build Date UTC : 2022-09-24 11:36:42.978607+00:00
  -->
</body>
</html>